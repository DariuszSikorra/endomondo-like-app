(this["webpackJsonpendomondo-like-app"]=this["webpackJsonpendomondo-like-app"]||[]).push([[0],{63:function(e,t,n){e.exports=n(86)},68:function(e,t,n){},86:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),i=n.n(o),c=(n(68),n(37)),l=n(11);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e,t){switch(t.type){case"RESET":return t.payload;case"CURRENT_POSITION":return s({},e,{currentPosition:t.payload,userPermission:!0,zoom:14});case"USER_DENIAL":return s({},e,{currentPosition:{latitude:52.834357,longitude:18.688854},userPermission:!1,zoom:5});case"MAP_POSITIONS":var n=e.mappedPositions.concat(t.payload);return s({},e,{mappedPositions:n});case"COUNTING_STARTED":return s({},e,{countingStarted:t.payload});case"COUNT":return s({},e,{runningTime:t.payload});case"MAP_DISTANCE":return s({},e,{distance:e.distance+t.payload});case"RESET_BUTTON":return s({},e,{countingStarted:!1,runningTime:0,mappedPositions:[],distance:0});case"TOGGLE_TAB":return s({},e,{openTab:t.payload});default:return e}},p=n(54),d=n(109),f=Object(p.a)({palette:{primary:{main:"#6eb63c"}}}),g=r.a.createContext(void 0),E=r.a.createContext(void 0),h=function(){var e=r.a.useContext(g);if(void 0===e)throw new Error("useAppState must be used within AppProvider");return e},v=function(){var e=r.a.useContext(E);if(void 0===e)throw new Error("useDispatchState must be used within AppProvider");return e},y=n(115),P=n(110),O=n(121),b=n(113),T=n(120),S=n(89),w=n(114),N=n(49),j=n.n(N),C=n(48),M=n.n(C),A=n(50),I=n.n(A);function k(){var e=h(),t=v(),n=Date.now()-e.runningTime;!function(e,t,n){var r=Object(a.useRef)((function(){}));Object(a.useEffect)((function(){r.current=e}),[e]),Object(a.useEffect)((function(){if(n){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}}),[t,n])}((function(){t({type:"COUNT",payload:Date.now()-n});var a={lat:e.currentPosition.latitude,lng:e.currentPosition.longitude};if(t({type:"MAP_POSITIONS",payload:a}),e.mappedPositions.length>1){var o=e.mappedPositions[e.mappedPositions.length-2],i=e.mappedPositions[e.mappedPositions.length-1];return r(o,i)}return r({lat:0,lng:0},{lat:0,lng:0})}),1e3,e.countingStarted);var r=function(e,n){var a=e.lat,r=e.lng,o=n.lat,i=n.lng,c=m(o-a),l=m(i-r),u=Math.sin(c/2)*Math.sin(c/2)+Math.cos(m(a))*Math.cos(m(o))*Math.sin(l/2)*Math.sin(l/2),s=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));function m(e){return e*(Math.PI/180)}return t({type:"MAP_DISTANCE",payload:6371*s})}}var R=Object(P.a)((function(e){return{verticalPadding:{padding:e.spacing(1,2)}}})),_=function(){var e=R(),t=h(),n=v();k(),Object(a.useEffect)((function(){var e=0;if(navigator.geolocation){e=navigator.geolocation.watchPosition((function(e){var t=e.coords;n({type:"CURRENT_POSITION",payload:t})}),(function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message)),n({type:"USER_DENIAL"})}),{enableHighAccuracy:!0,timeout:2e3,maximumAge:1e3})}else console.log("Something get wrong, geolocation is disabled, or your browser is not supporting it");return function(){return navigator.geolocation.clearWatch(e)}}),[n]);var o=r.a.createElement("div",null,r.a.createElement("span",null,Math.floor(t.runningTime/1e3/60<<0)),":",r.a.createElement("span",null,Math.floor(t.runningTime/1e3%60)<10&&0,Math.floor(t.runningTime/1e3%60)));return r.a.createElement(O.a,{anchor:"bottom",open:t.openTab,onClose:function(){return n({type:"TOGGLE_TAB",payload:!t.openTab})}},r.a.createElement(b.a,{container:!0,justify:"center",className:e.verticalPadding},r.a.createElement(b.a,{item:!0},r.a.createElement(b.a,{container:!0,direction:"column"},r.a.createElement(T.a,{textAlign:"center"},r.a.createElement(S.a,{variant:"h6",component:"h4",className:"alignCenter"},t.userPermission?"Your coordinates provided by geolocation:":"User rejected location sharing. User location is needed for the proper functioning of the application.")),r.a.createElement(b.a,{item:!0},"Accuracy: ~",Math.floor(t.currentPosition.accuracy),"m"),r.a.createElement(b.a,{item:!0},"Current speed:",t.currentPosition.speed?Math.floor(100*t.currentPosition.speed/60)+"km/h":"-"),r.a.createElement(b.a,{item:!0},"Current distance: ",Math.floor(1e3*t.distance),"m"),r.a.createElement(b.a,{item:!0},r.a.createElement(S.a,{color:"primary",variant:"h5",component:"h3",align:"center"},o)),r.a.createElement(b.a,{container:!0,item:!0,justify:"center"},r.a.createElement(w.a,{color:"primary",variant:"contained"},r.a.createElement(y.a,{onClick:function(){n({type:"COUNTING_STARTED",payload:!t.countingStarted})}},t.countingStarted?r.a.createElement(M.a,null):r.a.createElement(j.a,null))),!t.countingStarted&&r.a.createElement(y.a,{color:"primary",variant:"contained",onClick:function(){return n({type:"RESET_BUTTON"})}},r.a.createElement(I.a,null)))))))},D=n(29),G=n(90),U=function(){return a.createElement("h1",null,"Map is loading...")},x=D.Map,z=Object(G.a)((function(e){return{fullScreen:{position:"relative",height:"calc(100vh - 64px)"}}})),B=Object(D.GoogleApiWrapper)({apiKey:"AIzaSyCemKeklp6hKhbSOQk6YJpOhCwNKPeIVsc",LoadingContainer:U})((function(e){var t=z(),n=h();return r.a.createElement("div",{className:t.fullScreen},r.a.createElement(x,{google:e.google,zoom:n.zoom,initialCenter:{lat:n.currentPosition.latitude,lng:n.currentPosition.longitude}},n.userPermission?r.a.createElement(D.Marker,{title:"You are here!",position:{lat:n.currentPosition.latitude,lng:n.currentPosition.longitude}}):void 0,r.a.createElement(D.Polyline,{path:n.mappedPositions,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:3})))})),L=n(116),J=n(117),W=n(118),F=n(122),K=n(119),Y=function(e){var t=e.state,n=e.name,r=e.initializeFn,o=Object(a.useRef)(!1);Object(a.useEffect)((function(){if(!o.current){var e=localStorage.getItem(n);if(e){var t=JSON.parse(e);r(t),o.current=!0}}})),Object(a.useEffect)((function(){localStorage.setItem(n,JSON.stringify(t))}),[t,n])},q=n(51),H=n.n(q),Q=n(53),V=n.n(Q),$=Object(P.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),X=function(){var e=$(),t=h(),n=v();return Y({state:h(),name:"data",initializeFn:function(e){return n({type:"RESET",payload:e})}}),r.a.createElement("div",{className:e.root},r.a.createElement(L.a,{position:"static",className:e.root},r.a.createElement(J.a,{className:e.root},r.a.createElement(W.a,{edge:"start",color:"inherit","aria-label":"menu",className:e.menuButton,onClick:function(){return n({type:"TOGGLE_TAB",payload:!t.openTab})}},r.a.createElement(H.a,null)),r.a.createElement(S.a,{variant:"h6",className:e.title},"endomondo-like app"),r.a.createElement(F.a,{title:"Go to github page..."},r.a.createElement(K.a,{href:"https://github.com/DariuszSikorra/endomondo-like-app"},r.a.createElement(W.a,{edge:"end"},r.a.createElement(V.a,null)))))),r.a.createElement(B,null),r.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(e){var t=e.children,n=r.a.useReducer(m,{currentPosition:{lat:52.834357,lng:18.688854},userPermission:!1,zoom:5,countingStarted:!1,runningTime:0,mappedPositions:[],distance:0,openTab:!1}),a=Object(c.a)(n,2),o=a[0],i=a[1];return r.a.createElement(d.a,{theme:f},r.a.createElement(g.Provider,{value:o},r.a.createElement(E.Provider,{value:i},t)))}),null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[63,1,2]]]);
//# sourceMappingURL=main.dacfae75.chunk.js.map